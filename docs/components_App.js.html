<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/App.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/App.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect } from 'react';
import './styles/App.css';
import Login from './Login';
import Account from './Account';
import { getAccessTokenFromURL } from '../spotify';
// import SpotifyWebApi from 'spotify-web-api-js';
import { useDataLayerValue } from '../DataLayer';

/**
 * Spotify Web API object
 */
// const spotify = new SpotifyWebApi();

function App() {

  /**
   * DataLayer
   */
  const [{ token, spotify }, dispatch] = useDataLayerValue();

  useEffect( () => {
    // Retrieve access token from URL
    const hash = getAccessTokenFromURL();
    const newToken = hash.access_token;

    // Remove the access token from the URL for security reasons
    window.location.hash = ''; 


    // If the retrieved token exists, set accountToken and spotify object
    if (newToken) {

      // Push token into DataLayer
      dispatch({
        type: "SET_TOKEN",
        token: newToken,
      });

      spotify.setAccessToken(newToken);

      // Push user into DataLayer
      spotify.getMe().then(user => {
        dispatch({
          type: "SET_USER",
          user: user,
        });
      });

      // Push playlists into DataLayer
      spotify.getUserPlaylists().then((playlists) => {
        dispatch({
          type: "SET_PLAYLISTS",
          playlists: playlists,
        })
      });

    }
  }, []);

  return (
    &lt;div className="app"> 
      {token ? (&lt;Account />) : (&lt;Login />)}
    &lt;/div>
  );
}

export default App;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#authorizationEndpoint">authorizationEndpoint</a></li><li><a href="global.html#clientID">clientID</a></li><li><a href="global.html#getAccessTokenFromURL">getAccessTokenFromURL</a></li><li><a href="global.html#initialState">initialState</a></li><li><a href="global.html#loginURL">loginURL</a></li><li><a href="global.html#msToMinutes">msToMinutes</a></li><li><a href="global.html#redirectURI">redirectURI</a></li><li><a href="global.html#scopes">scopes</a></li><li><a href="global.html#spotify">spotify</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Sun Nov 06 2022 14:25:52 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
